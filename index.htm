<html>

<head>

<script>
var dist = (x1, y1, x2, y2) => Math.sqrt(Math.pow((x1 - x2), 2) - Math.pow((y1 - y2), 2));

var gravAcc = -25;
var interval = 5;
var pends = [[400, -25], [450, -25], [600, -25], [750, -100]]
var mobileNgVelocity = [];
var mobileTangVelocity = [];
var alpha = [];

var circleRadius = [];
for (var i = 1; i < pends.length; ++i) {
	circleRadius.push(dist(pends[i - 1][0], pends[i - 1][1], pends[i][0], pends[i][1]))
	alpha.push(0);mobileNgVelocity.push(0);mobileTangVelocity.push(0);
}

function render() {

    ctx.clearRect(0, 0, canv.width, canv.height);
    // Render fixed point
    ctx.beginPath();
    ctx.fillStyle = "black";
    ctx.arc(pends[0][0], -pends[0][1], 10, 0, 2*Math.PI);
    ctx.stroke();
    ctx.fill();
	for (var i = 1; i < pends.length; ++i) {
		ctx.moveTo(pends[i - 1][0], -pends[i - 1][1]);
		ctx.lineTo(pends[i][0], -pends[i][1]);
		ctx.stroke();

		ctx.arc(pends[i][0], -pends[i][1], 5, 0, 2*Math.PI);
		ctx.fillStyle = 'black';
		ctx.fill();
	}

}

function move() {
    render();
	for (var i = 1; i < pends.length; ++i) {
		var tangAcc = gravAcc * Math.cos(alpha[i - 1]);
		mobileTangVelocity[i - 1] += interval / 1000 * tangAcc;
		mobileNgVelocity[i - 1] = mobileTangVelocity[i - 1] / circleRadius[i - 1];

		pends[i][0] = pends[i - 1][0] + circleRadius[i - 1] * Math.cos(mobileNgVelocity[i - 1] + alpha[i - 1]);
		pends[i][1] = pends[i - 1][1] + circleRadius[i - 1] * Math.sin(mobileNgVelocity[i - 1] + alpha[i - 1]);
		alpha[i - 1] += mobileNgVelocity[i - 1];
		// FRICTION
		mobileTangVelocity[i - 1] /= 1.001;
	}
}

function domLoaded() {
    canv = document.getElementById("pendulum");
    ctx = canv.getContext("2d");
    

    setInterval(move, interval);
}
</script>

</head>
<body>
    <canvas id="pendulum" width="900px" height="600px" style="border:solid thin">
    </canvas>
</body>

<script>
domLoaded();
</script>
</html>